'use client';

import { createContext, useContext, useState, ReactNode, useCallback, useEffect } from 'react';

export type Language = 'fr' | 'en';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

// Translations dictionary
const translations: Record<Language, Record<string, string>> = {
  fr: {
    // Upload screen
    'upload.title': 'Strava Wrapped',
    'upload.subtitle': 'Ton ann√©e 2025 en mouvement',
    'upload.humor': "Strava n'aime pas que vous jouiez avec vos donn√©es. On va les lib√©rer.",
    'upload.dropzone': 'Importe ton export Strava',
    'upload.instruction': 'Glisse-d√©pose ou clique pour s√©lectionner ton fichier ZIP',
    'upload.fileType': 'Fichier ZIP uniquement ‚Ä¢ Max 2 Go',
    'upload.privacy': 'üîí 100% priv√© : tout le traitement se fait dans ton navigateur. Tes donn√©es ne quittent jamais ton appareil.',
    'upload.loading': 'Analyse de tes exploits...',
    'upload.extracting': 'Extraction des donn√©es du ZIP en cours',
    'upload.wait': 'Cela peut prendre quelques secondes pour les gros fichiers',
    'upload.processing': 'Traitement en cours...',
    'upload.pleaseWait': 'Merci de patienter',
    'upload.error.zipOnly': 'Merci de t√©l√©charger votre export Strava au format ZIP',
    'upload.error.tooLarge': 'Le fichier doit faire moins de 2 Go',

    // Tutorial
    'tutorial.howTo': 'Comment obtenir ton export Strava :',
    'tutorial.step1': 'Connecte-toi sur',
    'tutorial.step2': 'Dans "T√©l√©charger ou supprimer votre compte", clique sur',
    'tutorial.step2Link': 'Demander un export',
    'tutorial.step3': 'Re√ßois le lien de t√©l√©chargement par email (<3 min)',
    'tutorial.step4': 'T√©l√©charge le fichier .zip et importe-le ici',

    // Common
    'common.tapToContinue': 'Tap pour continuer',
    'common.activities': 'activit√©s',
    'common.km': 'km',
    'common.hours': 'h',
    'common.morning': 'Matin',
    'common.midday': 'Midi',
    'common.afternoon': 'Apr√®s-midi',
    'common.evening': 'Soir√©e',
    'common.night': 'Nuit',

    // Slide titles
    'slide.intro.title': 'Tableau de Bord',
    'slide.intro.subtitle': 'Ton ann√©e en chiffres',
    'slide.intro.activities': 'Activit√©s',
    'slide.intro.activitiesDesc': 'exploits r√©alis√©s',
    'slide.intro.distance': 'Distance',
    'slide.intro.distanceDesc': 'kilom√®tres parcourus',
    'slide.intro.elevation': 'D√©nivel√© +',
    'slide.intro.elevationDesc': 'm√®tres de d√©nivel√©',
    'slide.intro.message1': '2025 n\'√©tait pas une ann√©e',
    'slide.intro.message2': 'C\'√©tait une √©pop√©e.',
    'slide.intro.swipeToContinue': 'Swipe pour continuer',
    'slide.dominance.title': 'Ton Profil Athl√©tique',
    'slide.identity.title': 'Identit√©',
    'slide.identity.certifiedAthlete': 'Athl√®te Certifi√©',
    'slide.identity.hello': 'Salut',
    'slide.identity.readyForRecap': 'Pr√™t pour le r√©cap',
    'slide.identity.ofYourEpicIn': 'de ton √©pop√©e √†',
    'slide.identity.tapToStart': 'Tap pour commencer',
    'slide.breakdown.title': 'Activit√©s',
    'slide.breakdown.subtitle': 'R√©partition par type',
    'slide.breakdown.diversity': 'Diversit√©',
    'slide.breakdown.activityTypes': 'types d\'activit√©s',
    'slide.breakdown.tapToContinue': 'Tap pour continuer',
    'slide.elevation.title': 'Le Grimpeur',
    'slide.elevation.subtitle': 'D√©nivel√© positif conquis',
    'slide.elevation.elevationGain': 'D√©nivel√© +',
    'slide.elevation.metersClimbed': 'm√®tres grimp√©s',
    'slide.elevation.equivalentTo': '√âquivalent √†',
    'slide.elevation.message': 'Chaque mont√©e est une victoire',
    'slide.elevation.tapToContinue': 'Tap pour continuer',
    'slide.chronosMonth.title': 'Rythme Annuel',
    'slide.chronosMonth.subtitle': 'Ton ann√©e mois par mois',
    'slide.chronosMonth.mostActive': 'Ton mois le plus actif',
    'slide.chronosDay.title': 'Rythme Hebdo',
    'slide.chronosDay.subtitle': 'Tes jours pr√©f√©r√©s',
    'slide.chronos.title': 'Chronos',
    'slide.chronos.subtitle': 'Quand vous bougez',
    'slide.chronos.favoriteTime': 'Ton cr√©neau pr√©f√©r√©',
    'slide.weather.title': 'Guerrier M√©t√©o',
    'slide.weather.subtitle': 'Toutes conditions, toute l\'ann√©e',
    'slide.kudos.title': 'Le Chasseur de Kudos',
    'slide.kudos.subtitle': 'Ta popularit√© en 2025',
    'slide.kudos.kudosReceived': 'kudos re√ßus',
    'slide.kudos.onActivities': 'Sur',
    'slide.kudos.activitiesShared': 'activit√©s partag√©es',
    'slide.kudos.comments': 'commentaire',
    'slide.kudos.commentsPlural': 'commentaires',
    'slide.kudos.encouragement': 'd\'encouragement',
    'slide.kudos.legendCommunity': 'L√©gende de la communaut√©',
    'slide.kudos.risingStar': 'Star montante',
    'slide.kudos.encouragementChamp': 'Champion d\'encouragement',
    'slide.kudos.tapToContinue': 'Tap pour continuer',
    'slide.social.title': 'Social Butterfly',
    'slide.social.subtitle': 'Ta communaut√© Strava',
    'slide.social.followers': 'Followers',
    'slide.social.challenges': 'D√©fis 2025',
    'slide.social.comments': 'Commentaires',
    'slide.social.completedOf': 'Compl√©t√©s sur',
    'slide.social.publishedOn': 'Publi√©s sur Strava',
    'slide.social.community': 'Ta communaut√© Strava grandit et te soutient',
    'slide.consistency.title': 'R√©gularit√©',
    'slide.consistency.subtitle': 'Construire l\'habitude',
    'slide.consistency.recordStreak': 'S√©rie Record',
    'slide.consistency.consecutiveDays': 'jours cons√©cutifs',
    'slide.consistency.currentStreak': 'S√©rie Actuelle',
    'slide.consistency.days': 'jours',
    'slide.consistency.activeDays': 'Jours Actifs',
    'slide.consistency.activeDaysOfYear': 'jours actifs sur l\'ann√©e',
    'slide.consistency.totalWeeksActive': 'Total Semaines Actives',
    'slide.consistency.weeks': 'sem.',
    'slide.consistency.disciplineChamp': 'Champion de la discipline',
    'slide.consistency.habitMakesStrength': 'L\'habitude fait la force',
    'slide.consistency.keepItUp': 'Continuez sur cette lanc√©e',
    'slide.consistency.tapToContinue': 'Tap pour continuer',
    'slide.records.title': 'Hall of Fame',
    'slide.records.subtitle': 'Tes Records Personnels',
    'slide.records.noRecords': 'Aucun Record Disponible',
    'slide.records.uploadMore': 'Uploadez plus d\'activit√©s pour voir vos records',
    'slide.records.longestDistance': 'Plus Longue Distance',
    'slide.records.longestDuration': 'Plus Longue Dur√©e',
    'slide.records.fastestActivity': 'Activit√© la Plus Rapide',
    'slide.records.globalAverageSpeed': 'Vitesse Moyenne Globale',
    'slide.records.averagePerformance': 'Performance moyenne sur toutes tes activit√©s',
    'slide.records.tapToContinue': 'Tap pour continuer',

    'slide.summary.title': 'Ton Ann√©e 2025',
    'slide.summary.incredibleYear': 'Ann√©e Incroyable!',
    'slide.summary.wrapped': 'Wrapped 2025',
    'slide.summary.totalActivities': 'Activit√©s Totales',
    'slide.summary.trainingTime': 'Temps d\'Entra√Ænement',
    'slide.summary.hours': 'hrs',
    'slide.summary.favoriteActivity': 'Activit√© Pr√©f√©r√©e',
    'slide.summary.times': 'fois',
    'slide.summary.restart': 'Recommencer',
    'slide.summary.keepMoving': 'Continuez √† bouger. Continuez √† vous surpasser.',
    'slide.summary.seeYouIn2026': 'Rendez-vous en 2026!',
    'slide.summary.shareTitle': 'Mon Strava Wrapped 2025',
    'slide.summary.shareText': 'Mon r√©cap Strava 2025',
    'slide.summary.exportError': 'Erreur lors de l\'export de l\'image',

    'slide.intensity.title': 'Zones Cardiaques',
    'slide.intensity.subtitle': 'Distribution de ton intensit√©',
    'slide.intensity.dominantZone': 'Zone dominante',
    'slide.intensity.spentInZone': 'Pass√© {percentage}% du temps dans cette zone',
    'slide.intensity.tapToContinue': 'Tap pour continuer',

    'slide.power.title': 'La Puissance',
    'slide.power.subtitle': 'Watts g√©n√©r√©s en 2025',
    'slide.power.peakPower': 'Pic Maximum',
    'slide.power.watts': 'watts',
    'slide.power.mostPowerfulOutput': 'sortie la plus puissante',
    'slide.power.averagePower': 'Puissance Moyenne',
    'slide.power.onAllRidesWithSensor': 'sur toutes les sorties avec capteur',
    'slide.power.powerData': 'Donn√©es de puissance',
    'slide.power.activitiesWithSensor': 'activit√©s avec capteur',
    'slide.power.electrifying': '√âlectrisant',
    'slide.power.tapToContinue': 'Tap pour continuer',

    'slide.gravity.title': 'La Gravit√©',
    'slide.gravity.subtitle': 'Vous avez d√©fi√© la descente',
    'slide.gravity.negativeElevation': 'D√©nivel√© N√©gatif',
    'slide.gravity.metersOfDescent': 'm√®tres de descente',
    'slide.gravity.kneesImpacts': 'Vos genoux ont surv√©cu √†',
    'slide.gravity.equivalentImpacts': 'impacts √©quivalents',
    'slide.gravity.jointsDeserveMedal': 'Vos articulations m√©ritent une m√©daille',
    'slide.gravity.tapToContinue': 'Tap pour continuer',

    'slide.trail.title': 'Facteur Trail',
    'slide.trail.subtitle': 'Vous avez quitt√© le bitume',
    'slide.trail.ofDistanceOnTrails': 'de votre distance sur les sentiers',
    'slide.trail.badgeUnlocked': 'Badge d√©bloqu√©',
    'slide.trail.trailMaster': 'Ma√Ætre des Sentiers',
    'slide.trail.trailExplorer': 'Explorateur de Sentiers',
    'slide.trail.trailCurious': 'Curieux des Sentiers',
    'slide.trail.bornForTrails': 'Vous √™tes n√©(e) pour les sentiers',
    'slide.trail.natureCalls': 'La nature vous appelle',
    'slide.trail.keepExploring': 'Continuez d\'explorer',
    'slide.trail.tapToContinue': 'Tap pour continuer',

    'slide.calorie.title': 'Le Carburant',
    'slide.calorie.subtitle': 'Calories br√ªl√©es en 2025',
    'slide.calorie.kcalBurned': 'kcal br√ªl√©es',
    'slide.calorie.onActivities': 'Sur {count} activit√©{activityWord} ({percentage}% du total)',
    'slide.calorie.activity': '',
    'slide.calorie.activities': 's',
    'slide.calorie.equivalent': '√âquivalent',
    'slide.calorie.croissants': 'croissants',
    'slide.calorie.bakeryThanks': 'La boulangerie te remercie',
    'slide.calorie.tapToContinue': 'Tap pour continuer',

    'slide.moteur.title': 'Le Moteur',
    'slide.moteur.subtitle': 'Tes param√®tres de performance',
    'slide.moteur.ftpThreshold': 'Seuil de Puissance (FTP)',
    'slide.moteur.maxHeartRate': 'Fr√©quence Cardiaque Max',
    'slide.moteur.bpm': 'bpm',
    'slide.moteur.averagePowerInActivity': 'Puissance moyenne en activit√©',
    'slide.moteur.mostFrequentZones': 'Zones cardiaques les plus fr√©quentes',
    'slide.moteur.calibratedForPerformance': 'Machine calibr√©e pour la performance',
    'slide.moteur.tapToContinue': 'Tap pour continuer',

    'slide.emoji.title': 'Humeur en √âmojis',
    'slide.emoji.subtitle': 'Vos activit√©s racont√©es en symboles',
    'slide.emoji.emotionsInMotion': 'Vos √©motions en mouvement',
    'slide.emoji.tapToContinue': 'Tap pour continuer',

    'slide.dominance.detectedProfile': 'Profil d√©tect√©',
    'slide.dominance.preparingRecap': 'Pr√©paration de ton r√©cap...',

    'slide.socialSlide.title': 'Social Butterfly',
    'slide.socialSlide.subtitle': 'Ton r√©seau en 2025',
    'slide.socialSlide.messagesSent': 'Messages Envoy√©s',
    'slide.socialSlide.conversations': 'conversations',
    'slide.socialSlide.clubsJoined': 'Clubs Rejoints',
    'slide.socialSlide.communities': 'communaut√©s',
    'slide.socialSlide.socialIndex': 'Indice Social',
    'slide.socialSlide.superConnected': 'Super connect√©',
    'slide.socialSlide.wellIntegrated': 'Bien int√©gr√©',
    'slide.socialSlide.networkGrowing': 'R√©seau en croissance',
    'slide.socialSlide.connectedToCommunity': 'Connect√© √† la communaut√©',
    'slide.socialSlide.tapToContinue': 'Tap pour continuer',

    'slide.addict.title': 'L\'Accro',
    'slide.addict.subtitle': 'Tes habitudes Strava en 2025',
    'slide.addict.logins': 'connexions',
    'slide.addict.in2025': 'en 2025',
    'slide.addict.peakHour': 'Heure de Pic',
    'slide.addict.earlyBird': 'L√®ve-t√¥t',
    'slide.addict.afternoon': 'Apr√®s-midi',
    'slide.addict.evening': 'Soir√©e',
    'slide.addict.nightOwl': 'Noctambule',
    'slide.addict.favoriteDay': 'Jour Favori',
    'slide.addict.mostActiveDay': 'ton jour le plus actif',
    'slide.addict.confirmedAddict': 'Accro confirm√©',
    'slide.addict.veryRegular': 'Tr√®s r√©gulier',
    'slide.addict.moderatelyConnected': 'Connect√© mod√©r√©',
    'slide.addict.tapToContinue': 'Tap pour continuer',
  },
  en: {
    // Upload screen
    'upload.title': 'Strava Wrapped',
    'upload.subtitle': 'Your 2025 in Motion',
    'upload.humor': "Strava doesn't like you playing with your data. Let's free it.",
    'upload.dropzone': 'Import your Strava export',
    'upload.instruction': 'Drag & drop or click to select your ZIP file',
    'upload.fileType': 'ZIP file only ‚Ä¢ Max 2 GB',
    'upload.privacy': 'üîí 100% private: all processing happens in your browser. Your data never leaves your device.',
    'upload.loading': 'Analyzing your achievements...',
    'upload.extracting': 'Extracting ZIP data',
    'upload.wait': 'This may take a few seconds for large files',
    'upload.processing': 'Processing...',
    'upload.pleaseWait': 'Please wait',
    'upload.error.zipOnly': 'Please upload your Strava export as a ZIP file',
    'upload.error.tooLarge': 'File must be less than 2 GB',

    // Tutorial
    'tutorial.howTo': 'How to get your Strava export:',
    'tutorial.step1': 'Log in to',
    'tutorial.step2': 'In "Download or Delete Your Account", click',
    'tutorial.step2Link': 'Request Your Archive',
    'tutorial.step3': 'Receive download link via email (<3 min)',
    'tutorial.step4': 'Download the .zip file and import it here',

    // Common
    'common.tapToContinue': 'Tap to continue',
    'common.activities': 'activities',
    'common.km': 'km',
    'common.hours': 'h',
    'common.morning': 'Morning',
    'common.midday': 'Midday',
    'common.afternoon': 'Afternoon',
    'common.evening': 'Evening',
    'common.night': 'Night',

    // Slide titles
    'slide.intro.title': 'Dashboard',
    'slide.intro.subtitle': 'Your year in numbers',
    'slide.intro.activities': 'Activities',
    'slide.intro.activitiesDesc': 'achievements completed',
    'slide.intro.distance': 'Distance',
    'slide.intro.distanceDesc': 'kilometers covered',
    'slide.intro.elevation': 'Elevation +',
    'slide.intro.elevationDesc': 'meters of elevation',
    'slide.intro.message1': '2025 wasn\'t a year',
    'slide.intro.message2': 'It was an epic.',
    'slide.intro.swipeToContinue': 'Swipe to continue',
    'slide.dominance.title': 'Your Athletic Profile',
    'slide.identity.title': 'Identity',
    'slide.identity.certifiedAthlete': 'Certified Athlete',
    'slide.identity.hello': 'Hello',
    'slide.identity.readyForRecap': 'Ready for the recap',
    'slide.identity.ofYourEpicIn': 'of your epic in',
    'slide.identity.tapToStart': 'Tap to start',
    'slide.breakdown.title': 'Activities',
    'slide.breakdown.subtitle': 'Breakdown by type',
    'slide.breakdown.diversity': 'Diversity',
    'slide.breakdown.activityTypes': 'activity types',
    'slide.breakdown.tapToContinue': 'Tap to continue',
    'slide.elevation.title': 'The Climber',
    'slide.elevation.subtitle': 'Elevation gain conquered',
    'slide.elevation.elevationGain': 'Elevation +',
    'slide.elevation.metersClimbed': 'meters climbed',
    'slide.elevation.equivalentTo': 'Equivalent to',
    'slide.elevation.message': 'Every climb is a victory',
    'slide.elevation.tapToContinue': 'Tap to continue',
    'slide.chronosMonth.title': 'Annual Rhythm',
    'slide.chronosMonth.subtitle': 'Your year month by month',
    'slide.chronosMonth.mostActive': 'Your most active month',
    'slide.chronosDay.title': 'Weekly Rhythm',
    'slide.chronosDay.subtitle': 'Your favorite days',
    'slide.chronos.title': 'Chronos',
    'slide.chronos.subtitle': 'When you move',
    'slide.chronos.favoriteTime': 'Your favorite time',
    'slide.weather.title': 'Weather Warrior',
    'slide.weather.subtitle': 'All conditions, all year',
    'slide.kudos.title': 'The Kudos Hunter',
    'slide.kudos.subtitle': 'Your 2025 popularity',
    'slide.kudos.kudosReceived': 'kudos received',
    'slide.kudos.onActivities': 'On',
    'slide.kudos.activitiesShared': 'shared activities',
    'slide.kudos.comments': 'comment',
    'slide.kudos.commentsPlural': 'comments',
    'slide.kudos.encouragement': 'of encouragement',
    'slide.kudos.legendCommunity': 'Community legend',
    'slide.kudos.risingStar': 'Rising star',
    'slide.kudos.encouragementChamp': 'Encouragement champion',
    'slide.kudos.tapToContinue': 'Tap to continue',
    'slide.social.title': 'Social Butterfly',
    'slide.social.subtitle': 'Your Strava community',
    'slide.social.followers': 'Followers',
    'slide.social.challenges': 'Challenges 2025',
    'slide.social.comments': 'Comments',
    'slide.social.completedOf': 'Completed out of',
    'slide.social.publishedOn': 'Published on Strava',
    'slide.social.community': 'Your Strava community grows and supports you',
    'slide.consistency.title': 'Consistency',
    'slide.consistency.subtitle': 'Building the habit',
    'slide.consistency.recordStreak': 'Record Streak',
    'slide.consistency.consecutiveDays': 'consecutive days',
    'slide.consistency.currentStreak': 'Current Streak',
    'slide.consistency.days': 'days',
    'slide.consistency.activeDays': 'Active Days',
    'slide.consistency.activeDaysOfYear': 'active days of the year',
    'slide.consistency.totalWeeksActive': 'Total Weeks Active',
    'slide.consistency.weeks': 'wks.',
    'slide.consistency.disciplineChamp': 'Discipline champion',
    'slide.consistency.habitMakesStrength': 'Habit makes strength',
    'slide.consistency.keepItUp': 'Keep it up',
    'slide.consistency.tapToContinue': 'Tap to continue',
    'slide.records.title': 'Hall of Fame',
    'slide.records.subtitle': 'Your Personal Records',
    'slide.records.noRecords': 'No Records Available',
    'slide.records.uploadMore': 'Upload more activities to see your records',
    'slide.records.longestDistance': 'Longest Distance',
    'slide.records.longestDuration': 'Longest Duration',
    'slide.records.fastestActivity': 'Fastest Activity',
    'slide.records.globalAverageSpeed': 'Global Average Speed',
    'slide.records.averagePerformance': 'Average performance across all your activities',
    'slide.records.tapToContinue': 'Tap to continue',

    'slide.summary.title': 'Your 2025',
    'slide.summary.incredibleYear': 'Incredible Year!',
    'slide.summary.wrapped': 'Wrapped 2025',
    'slide.summary.totalActivities': 'Total Activities',
    'slide.summary.trainingTime': 'Training Time',
    'slide.summary.hours': 'hrs',
    'slide.summary.favoriteActivity': 'Favorite Activity',
    'slide.summary.times': 'times',
    'slide.summary.restart': 'Restart',
    'slide.summary.keepMoving': 'Keep moving. Keep surpassing yourself.',
    'slide.summary.seeYouIn2026': 'See you in 2026!',
    'slide.summary.shareTitle': 'My Strava Wrapped 2025',
    'slide.summary.shareText': 'My Strava 2025 recap',
    'slide.summary.exportError': 'Error exporting image',

    'slide.intensity.title': 'Heart Rate Zones',
    'slide.intensity.subtitle': 'Your intensity distribution',
    'slide.intensity.dominantZone': 'Dominant zone',
    'slide.intensity.spentInZone': 'Spent {percentage}% of time in this zone',
    'slide.intensity.tapToContinue': 'Tap to continue',

    'slide.power.title': 'Power',
    'slide.power.subtitle': 'Watts generated in 2025',
    'slide.power.peakPower': 'Peak Power',
    'slide.power.watts': 'watts',
    'slide.power.mostPowerfulOutput': 'most powerful output',
    'slide.power.averagePower': 'Average Power',
    'slide.power.onAllRidesWithSensor': 'on all rides with sensor',
    'slide.power.powerData': 'Power data',
    'slide.power.activitiesWithSensor': 'activities with sensor',
    'slide.power.electrifying': 'Electrifying',
    'slide.power.tapToContinue': 'Tap to continue',

    'slide.gravity.title': 'Gravity',
    'slide.gravity.subtitle': 'You defied the descent',
    'slide.gravity.negativeElevation': 'Negative Elevation',
    'slide.gravity.metersOfDescent': 'meters of descent',
    'slide.gravity.kneesImpacts': 'Your knees survived',
    'slide.gravity.equivalentImpacts': 'equivalent impacts',
    'slide.gravity.jointsDeserveMedal': 'Your joints deserve a medal',
    'slide.gravity.tapToContinue': 'Tap to continue',

    'slide.trail.title': 'Trail Factor',
    'slide.trail.subtitle': 'You left the pavement',
    'slide.trail.ofDistanceOnTrails': 'of your distance on trails',
    'slide.trail.badgeUnlocked': 'Badge unlocked',
    'slide.trail.trailMaster': 'Trail Master',
    'slide.trail.trailExplorer': 'Trail Explorer',
    'slide.trail.trailCurious': 'Trail Curious',
    'slide.trail.bornForTrails': 'You were born for the trails',
    'slide.trail.natureCalls': 'Nature calls you',
    'slide.trail.keepExploring': 'Keep exploring',
    'slide.trail.tapToContinue': 'Tap to continue',

    'slide.calorie.title': 'The Fuel',
    'slide.calorie.subtitle': 'Calories burned in 2025',
    'slide.calorie.kcalBurned': 'kcal burned',
    'slide.calorie.onActivities': 'On {count} {activityWord} ({percentage}% of total)',
    'slide.calorie.activity': 'activity',
    'slide.calorie.activities': 'activities',
    'slide.calorie.equivalent': 'Equivalent',
    'slide.calorie.croissants': 'croissants',
    'slide.calorie.bakeryThanks': 'The bakery thanks you',
    'slide.calorie.tapToContinue': 'Tap to continue',

    'slide.moteur.title': 'The Engine',
    'slide.moteur.subtitle': 'Your performance parameters',
    'slide.moteur.ftpThreshold': 'Power Threshold (FTP)',
    'slide.moteur.maxHeartRate': 'Max Heart Rate',
    'slide.moteur.bpm': 'bpm',
    'slide.moteur.averagePowerInActivity': 'Average power in activity',
    'slide.moteur.mostFrequentZones': 'Most frequent heart rate zones',
    'slide.moteur.calibratedForPerformance': 'Machine calibrated for performance',
    'slide.moteur.tapToContinue': 'Tap to continue',

    'slide.emoji.title': 'Emoji Mood',
    'slide.emoji.subtitle': 'Your activities told in symbols',
    'slide.emoji.emotionsInMotion': 'Your emotions in motion',
    'slide.emoji.tapToContinue': 'Tap to continue',

    'slide.dominance.detectedProfile': 'Detected profile',
    'slide.dominance.preparingRecap': 'Preparing your recap...',

    'slide.socialSlide.title': 'Social Butterfly',
    'slide.socialSlide.subtitle': 'Your network in 2025',
    'slide.socialSlide.messagesSent': 'Messages Sent',
    'slide.socialSlide.conversations': 'conversations',
    'slide.socialSlide.clubsJoined': 'Clubs Joined',
    'slide.socialSlide.communities': 'communities',
    'slide.socialSlide.socialIndex': 'Social Index',
    'slide.socialSlide.superConnected': 'Super connected',
    'slide.socialSlide.wellIntegrated': 'Well integrated',
    'slide.socialSlide.networkGrowing': 'Network growing',
    'slide.socialSlide.connectedToCommunity': 'Connected to the community',
    'slide.socialSlide.tapToContinue': 'Tap to continue',

    'slide.addict.title': 'The Addict',
    'slide.addict.subtitle': 'Your Strava habits in 2025',
    'slide.addict.logins': 'logins',
    'slide.addict.in2025': 'in 2025',
    'slide.addict.peakHour': 'Peak Hour',
    'slide.addict.earlyBird': 'Early bird',
    'slide.addict.afternoon': 'Afternoon',
    'slide.addict.evening': 'Evening',
    'slide.addict.nightOwl': 'Night owl',
    'slide.addict.favoriteDay': 'Favorite Day',
    'slide.addict.mostActiveDay': 'your most active day',
    'slide.addict.confirmedAddict': 'Confirmed addict',
    'slide.addict.veryRegular': 'Very regular',
    'slide.addict.moderatelyConnected': 'Moderately connected',
    'slide.addict.tapToContinue': 'Tap to continue',
  },
};

export function LanguageProvider({ children }: { children: ReactNode }) {
  const [language, setLanguageState] = useState<Language>('fr');
  const [isClient, setIsClient] = useState(false);

  // Load from localStorage on mount (client-side only)
  useEffect(() => {
    setIsClient(true);
    if (typeof window !== 'undefined') {
      const savedLang = localStorage.getItem('stravawrapped_language') as Language;
      if (savedLang && (savedLang === 'fr' || savedLang === 'en')) {
        setLanguageState(savedLang);
      }
    }
  }, []);

  const setLanguage = useCallback((lang: Language) => {
    setLanguageState(lang);
    // Persist to localStorage
    if (typeof window !== 'undefined') {
      localStorage.setItem('stravawrapped_language', lang);
    }
  }, []);

  // Translation function
  const t = useCallback((key: string): string => {
    return translations[language][key] || key;
  }, [language]);

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within LanguageProvider');
  }
  return context;
}
